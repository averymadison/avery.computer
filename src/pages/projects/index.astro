---
import { getCollection } from "astro:content";

import Center from "../../components/Center.astro";
import PageHeader from "../../components/PageHeader.astro";
import SubscribeCallout from "../../components/Subscribe/SubscribeCallout.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import ProjectPreview from "../../components/ProjectPreview.astro";

const projects = await getCollection("projects");

const title = "Projects";
const description = "Little things I've built and put on the internet.";
---

<BaseLayout title={title} description={description} includeFooter padBottom>
  <PageHeader title={title} description={description} slug="projects" />
  <Center>
    <section class="projects">
      {
        projects
          .sort((a, b) => b.data.datePublished - a.data.datePublished)
          .map(({ data }) => (
            <ProjectPreview
              title={data.title}
              description={data.description}
              datePublished={data.datePublished}
              img={data.img}
              imgAlt={data.imgAlt}
              url={data.url}
              repo={data.repo}
            />
          ))
      }
    </section>
    <SubscribeCallout />
  </Center>
</BaseLayout>

<style>
  .projects {
    display: flex;
    flex-direction: column;
    gap: 3em;
    padding-block-end: 4em;
  }
</style>
