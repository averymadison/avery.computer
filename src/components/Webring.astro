---
import type { CollectionEntry } from "astro:content";

interface Props {
  webring: CollectionEntry<"webrings">;
}

const { webring } = Astro.props;
const { data } = webring;
const { title, description, url, prev, next, random, color } = data;
---

<div
  class="webring"
  style={`--webring-bg: var(--${color}-3); --webring-text: var(--${color}-12); --webring-hover: var(--${color}-4);`}
>
  <div class="main">
    <h3><a href={url} rel="external">{title}</a></h3>
    <p>{description}</p>
  </div>
  {
    random && (
      <a
        rel="external"
        referrerpolicy="strict-origin"
        href={random}
        class="random"
        aria-label="Random website"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          width="24px"
          fill="currentColor"
        >
          <path d="M18 17.8832V16L23 19L18 22V19.9095C14.9224 19.4698 12.2513 17.4584 11.0029 14.5453L11 14.5386L10.9971 14.5453C9.57893 17.8544 6.32508 20 2.72483 20H2V18H2.72483C5.52503 18 8.05579 16.3312 9.15885 13.7574L9.91203 12L9.15885 10.2426C8.05579 7.66878 5.52503 6 2.72483 6H2V4H2.72483C6.32508 4 9.57893 6.14557 10.9971 9.45473L11 9.46141L11.0029 9.45473C12.2513 6.5416 14.9224 4.53022 18 4.09051V2L23 5L18 8V6.11684C15.7266 6.53763 13.7737 8.0667 12.8412 10.2426L12.088 12L12.8412 13.7574C13.7737 15.9333 15.7266 17.4624 18 17.8832Z" />
        </svg>
      </a>
    )
  }
  <a
    rel="external"
    referrerpolicy="strict-origin"
    href={prev}
    class="prev"
    aria-label="Previous website"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      width="32px"
      fill="currentColor"
    >
      <path d="M7 18V6H9V18H7ZM11 12 17 6V18L11 12Z"></path>
    </svg>
  </a>
  <a
    rel="external"
    referrerpolicy="strict-origin"
    href={next}
    class="next"
    aria-label="Next website"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      width="32px"
      fill="currentColor"
    >
      <path d="M17 6 17 18H15L15 6 17 6ZM13 12 7 18V6L13 12Z"></path>
    </svg>
  </a>
</div>

<style lang="scss">
  .webring {
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
    padding: var(--space-m);
    padding-inline-start: var(--space-l);
    background: var(--webring-bg);
    color: var(--webring-text);
    border-radius: var(--radius-m);
    overflow: hidden;

    h3 {
      margin: 0;
    }

    p {
      margin-block-start: var(--space-2xs);
      line-height: var(--line-height-snug);
    }

    a {
      text-align: center;
      text-decoration: none;
    }

    .prev,
    .next,
    .random {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      width: 44px;
      height: 44px;
      border-radius: var(--radius-full);
      opacity: 0.6;

      @media (hover: hover) {
        &:hover {
          background: var(--webring-hover);
          opacity: 1;
        }
      }
    }

    .main {
      flex: 1;
    }
  }
</style>
